<!DOCTYPE html>
<html>
<body  onload="showHintAnt('CMD_ANTENNA');showHintSwrT('CMD_SWRTHRESH');all_values();">

<h2>LDG At200pc</h2>

<div name="antenna">
<button name="button" value="REQ_ANT1" onclick="showHintAnt(this.value)">ANT 1</button>
<button name="button" value="REQ_ANT2" onclick="showHintAnt(this.value)">ANT 2</button>
<p>Selected: <span id="txtHint_antenna"></span></p> 
</div>
<div name="swr">
<button name="button" value="REQ_SWR11" onclick="showHintSwrT(this.value)">SWR 1.1</button>
<button name="button" value="REQ_SWR13" onclick="showHintSwrT(this.value)">SWR 1.3</button>
<button name="button" value="REQ_SWR15" onclick="showHintSwrT(this.value)">SWR 1.5</button>
<button name="button" value="REQ_SWR17" onclick="showHintSwrT(this.value)">SWR 1.7</button>
<button name="button" value="REQ_SWR20" onclick="showHintSwrT(this.value)">SWR 2.0</button>
<button name="button" value="REQ_SWR25" onclick="showHintSwrT(this.value)">SWR 2.5</button>
<button name="button" value="REQ_SWR30" onclick="showHintSwrT(this.value)">SWR 3.0</button>
<p>SWR treshold: <span id="txtHint_swr"></span></p> 
</div>
<div name="panel">
<button name="button" value="REQ_INDUP"    onclick="all_values(this.value)">IND UP</button>
<button name="button" value="REQ_INDDN"    onclick="all_values(this.value)">IND DN</button>
<button name="button" value="REQ_CAPUP"    onclick="all_values(this.value)">CAP UP</button>
<button name="button" value="REQ_CAPDN"    onclick="all_values(this.value)">CAP DN</button>
<button name="button" value="REQ_FULLTUNE" onclick="all_values(this.value)">TUNE</button>

</div>
<div name="at_information">
<p>Json:</p>
<div>SwrTreshold: <span id="swr_threshold"></span></div> 
<div>HiLoZ: <span id="hilo_z_string"></span></div> 
<div>Capacitor: <span id="capval_string"></span></div> 
<div>Inductor: <span id="indval_string"></span></div> 
<div>Operation: <span id="instandby_string"></span></div> 
<div>Status: <span id="at_status_string"></span></div> 
<div>Power: <span id="powerfwd_string"></span></div> 
<div>Reverse: <span id="powerrev_string"></span></div> 
<div>SWR: <span id="swr_string"></span></div> 
<div>Live: <span id="live_update_string"></span></div> 
<div>Freq: <span id="tx_frequency_string"></span></div> 

</div>
<script>
//t = setTimeout(function(){ all_values()}, 500);

function all_values(str = "REQ_ALLUPDATE"){
	
	var xhttp = new XMLHttpRequest();
	xhttp.onreadystatechange = function() {
    	if (this.readyState == 4 && this.status == 200) {
        	//document.getElementById("demo").innerHTML = this.responseText;
        	var obj=this.responseText;
        	obj1 = JSON.parse(obj);
        	//var obj1 = JSON.parse("{ \"swr_threshold\" : \"1:1\", \"hilo_z_string\" : \"1\", \"capval_string\" : \"123\", \"indval_string\" : \"120\" , \"instandby_string\" : \"standby\", \"at_status_string\" : \"off\", \"powerfwd_string\" : \"125\",\"powerrev_string\" : \"45.0\", \"swr_string\" : \"10\", \"live_update_string\" : \"on\", \"tx_frequency_string\" : \"135\"}");
        	
        	if(obj1.swr_threshold) document.getElementById("swr_threshold").innerHTML = obj1.swr_threshold;
			if(obj1.hilo_z_string)document.getElementById("hilo_z_string").innerHTML = obj1.hilo_z_string;
			if(obj1.capval_string)document.getElementById("capval_string").innerHTML = obj1.capval_string;
			if(obj1.indval_string)document.getElementById("indval_string").innerHTML = obj1.indval_string;
			if(obj1.instandby_string)document.getElementById("instandby_string").innerHTML = obj1.instandby_string;
			if(obj1.at_status_string)document.getElementById("at_status_string").innerHTML = obj1.at_status_string;
			if(obj1.powerfwd_string)document.getElementById("powerfwd_string").innerHTML = obj1.powerfwd_string;
			if(obj1.powerrev_string)document.getElementById("powerrev_string").innerHTML = obj1.powerrev_string;
			if(obj1.swr_string)document.getElementById("swr_string").innerHTML = obj1.swr_string;
			if(obj1.swr_string)document.getElementById("live_update_string").innerHTML = obj1.live_update_string;
			if(obj1.tx_frequency_string)document.getElementById("tx_frequency_string").innerHTML = obj1.tx_frequency_string;
			t = setTimeout(function(){ all_values()}, 1500);
			}
	};
	xhttp.open("GET", "http://192.168.2.99/"+str, true);
	xhttp.send();	
	
}


function showHintAnt(str) {
  var xhttp;
  if (str.length == 0) { 
    document.getElementById("txtHint_antenna").innerHTML = "";
    return;
  }
  xhttp = new XMLHttpRequest();
  xhttp.onreadystatechange = function() {
    if (this.readyState == 4 && this.status == 200) {
      document.getElementById("txtHint_antenna").innerHTML = this.responseText;
    }
  };
  xhttp.open("GET", "http://192.168.2.99/"+str, true);
  xhttp.send();   
}

function showHintSwrT(str) {
  var xhttp;
  if (str.length == 0) { 
    document.getElementById("txtHint_swr").innerHTML = "";
    return;
  }
  xhttp = new XMLHttpRequest();
  xhttp.onreadystatechange = function() {
    if (this.readyState == 4 && this.status == 200) {
      document.getElementById("txtHint_swr").innerHTML = this.responseText;
    }
  };
  xhttp.open("GET", "http://192.168.2.99/"+str, true);
  xhttp.send();   
}

</script>

</body>
</html>